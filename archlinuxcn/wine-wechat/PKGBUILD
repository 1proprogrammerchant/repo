# Maintainer: lilydjwg <lilydjwg@gmail.com>

pkgname=wine-wechat
pkgver=3.3.5.50
pkgrel=1
pkgdesc='Run WeChat Windows version with Wine (Chinese version)'
url='https://weixin.qq.com/'
arch=('i686' 'x86_64')
license=('custom')
depends=('libarchive' 'zstd' 'python' 'winetricks'
        'wine' 'lib32-libldap' 'wine_gecko' 'lib32-libpulse')
optdepends=('wine-for-wechat: get rid of those border shades'
            'lib32-v4l-utils: for video chat')
source=("${pkgname}.tar.zst"
        "${pkgname}.desktop"
        "${pkgname}-cfg.desktop"
        "${pkgname}-dir.desktop"
        "wechat.png"
        "wechat")
noextract=("${pkgname}.tar.zst")
install=wechat.install

package() {
  for name in "" "-cfg" "-dir"; do
    install -Dm 644 "${pkgname}${name}.desktop" "${pkgdir}/usr/share/applications/${pkgname}${name}.desktop"
  done
  install -Dm 644 "wechat.png" "${pkgdir}/usr/share/pixmaps/wechat.png"
  install -Dm 755 "wechat" "${pkgdir}/usr/bin/wechat"

  install -Dm 644 "wine-wechat.tar.zst" "${pkgdir}/opt/${pkgname}/wine-wechat.tar.zst"
}


sha1sums=('9b90696a858e129f93521b703bc9d83dc7482e5f'
          'fd20b287ada368afb0ec620635999fbb206814da'
          'c791d6514125400c424b610188c4d105832eda80'
          '48a3fcc818d0db6c4a4f2a200d62300e9648bd80'
          'a6a9c232ab8f1188b7b583a9b81e98371af95ae9'
          '69cb2efa20763cddec1d435e65d186316f859ca7')
